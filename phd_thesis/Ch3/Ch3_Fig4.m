clc;clear;
V=1;
phi=-pi:.01:pi;
R=3*sqrt(V);

N=16;
N=1024;
[P_u,P_g]=BeamPattern_ug_eqn(N,R,phi);%[P_u,P_g]=bfwsn_ug_eqn(N,V,phi);
y4=10*log10(abs(P_g));
x1=phi*180/pi;

figure1 = figure;
%% Create axes
% axes1 = axes('XTick',[-180 -120 -60 0 60 120 180],'Parent',figure1);
% xlim(axes1,[-180 180]);
legend('Uniform','Gaussian','Location','NorthEast')
xlabel('Angle \phi [degree]');
ylabel('Power [dB]');
box('on');
grid('on');
hold('all');
plot(x1,y4,'k','LineWidth',1)
xlim([0 60]);

plot(x1,-3*ones(1,length(x1)),'k--','LineWidth',1)
plot(x1,-27*ones(1,length(x1)),'k--','LineWidth',1)

plot(7.357*ones(1,36),-35:0,'k-.','LineWidth',1)
plot(24*ones(1,36),-35:0,'k-.','LineWidth',1)


% Create doublearrow
annotation(figure1,'doublearrow',[0.775 0.775],...
    [0.294238095238095 0.219047619047619]);

% Create doublearrow
annotation(figure1,'doublearrow',[0.775 0.773214285714286],...
    [0.920428571428571 0.852380952380952]);

% Create arrow
annotation(figure1,'arrow',[0.894642857142857 0.4375],...
    [0.573809523809524 0.573809523809524]);

% Create textbox
annotation(figure1,'textbox',...
    [0.16242857142857 0.117142857142858 0.0579285714285714 0.0761904761904785],...
    'String',{'\phi_{3dB}'},...
    'FitBoxToText','off',...
    'LineStyle','none');

% Create textbox
annotation(figure1,'textbox',...
    [0.443857142857142 0.116666666666668 0.0579285714285714 0.0761904761904785],...
    'String',{'\phi_{SL}'},...
    'FitBoxToText','off',...
    'LineStyle','none');

% Create textbox
annotation(figure1,'textbox',...
    [0.685285714285713 0.213333333333336 0.114714285714287 0.0761904761904786],...
    'String',{'3 dB'},...
    'FitBoxToText','off',...
    'LineStyle','none');

% Create textbox
annotation(figure1,'textbox',...
    [0.685642857142855 0.836190476190483 0.114714285714287 0.0761904761904786],...
    'String',{'3 dB'},...
    'FitBoxToText','off',...
    'LineStyle','none');

% Create textbox
annotation(figure1,'textbox',...
    [0.121357142857141 0.583809523809527 0.239714285714287 0.0761904761904785],...
    'String',{'Mainlobe'},...
    'FitBoxToText','off',...
    'LineStyle','none');

% Create textbox
annotation(figure1,'textbox',...
    [0.538857142857141 0.582380952380955 0.239714285714287 0.0761904761904785],...
    'String',{'Sidelobe Region'},...
    'FitBoxToText','off',...
    'LineStyle','none');

% Create arrow
annotation(figure1,'arrow',[0.132142857142857 0.225],...
    [0.573809523809524 0.576190476190476]);

